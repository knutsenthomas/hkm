document.addEventListener("DOMContentLoaded",()=>{const l=window.firebaseService;if(!l)return;l.onAuthChange(async t=>{if(!t)return;const e=document.getElementById("admin-name"),i=document.getElementById("admin-avatar");if(e||i){let o=null;try{const s=await firebase.firestore().collection("users").doc(t.uid).get();s.exists&&(o=s.data())}catch{}const m=o&&o.displayName||t.displayName||t.email,v=o&&o.photoURL||t.photoURL;if(e&&(e.textContent=m),i)if(v)i.innerHTML=`<img src="${v}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">`;else{const s=m.split(" ").map(f=>f[0]).join("").toUpperCase();i.textContent=s.substring(0,2)}}});const c=document.getElementById("mobile-nav-toggle"),n=document.querySelector(".sidebar");let a=document.querySelector(".sidebar-overlay");if(!a&&n&&(a=document.createElement("div"),a.className="sidebar-overlay",document.body.appendChild(a)),c&&n){const t=e=>{const i=e!==void 0?e:!n.classList.contains("active");n.classList.toggle("active",i),a&&a.classList.toggle("active",i)};c.addEventListener("click",e=>{e.stopPropagation(),t()}),a&&a.addEventListener("click",()=>{t(!1)}),document.addEventListener("click",e=>{n.classList.contains("active")&&!n.contains(e.target)&&e.target!==c&&t(!1)})}const r=document.querySelectorAll(".mobile-bottom-nav .mobile-nav-item"),d=window.location.pathname;r.forEach(t=>{const e=t.getAttribute("href");e&&e!=="#"&&d.includes(e)?(r.forEach(i=>i.classList.remove("active")),t.classList.add("active")):e==="#"&&(d.endsWith("index.html")||d.endsWith("admin/"))&&t.getAttribute("data-section")==="overview"&&t.classList.add("active")})});

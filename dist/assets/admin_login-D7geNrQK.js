import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css                      */import"./firebase-config-BNsh33Gw.js";import"./firebase-service-DNKZ8naa.js";import"./user-roles-D0mdCVLS.js";(async function(){console.log("[HKM] Admin Auth Script loaded");async function l(){const n=window.firebaseService,e=firebase.auth().currentUser;if(!e||!n){window.location.href="index.html";return}let i="medlem";try{i=await n.getUserRole(e.uid)}catch(t){console.warn("Kunne ikke hente rolle:",t)}const s=window.HKM_PERMISSIONS&&Array.isArray(window.HKM_PERMISSIONS.ACCESS_ADMIN)&&window.HKM_PERMISSIONS.ACCESS_ADMIN.includes(i);window.location.href=s?"index.html":"../minside/index.html"}const r=document.getElementById("login-form");r&&r.addEventListener("submit",async n=>{n.preventDefault(),console.log("[HKM] Login attempt started");const e=window.firebaseService,i=document.getElementById("email").value,s=document.getElementById("password").value,t=r.querySelector("button"),o=document.getElementById("error-box");if(!t)return;const c=t.textContent;if(t.textContent="Logger inn...",t.disabled=!0,o&&(o.style.display="none"),!e||!e.isInitialized){console.error("[HKM] Firebase service not ready",{service:!!e,initialized:e==null?void 0:e.isInitialized}),showToast("⚠️ Tjenesten er ikke helt klar. Vennligst prøv igjen om et sekund.","warning"),t.textContent=c,t.disabled=!1;return}try{console.log("[HKM] Logging in..."),await e.login(i,s),console.log("[HKM] Login success, routing..."),await l()}catch(d){console.error("[HKM] Login error:",d),o&&(o.textContent="Feil e-post eller passord. Vennligst prøv igjen.",o.style.display="block"),t.textContent=c,t.disabled=!1}});const a=document.getElementById("google-login");a&&a.addEventListener("click",async()=>{const n=window.firebaseService;if(!n||!n.isInitialized){showToast("⚠️ Tjenesten er ikke klar!","error");return}try{await n.loginWithGoogle(),await l()}catch(e){console.error("[HKM] Google login error:",e)}})})();

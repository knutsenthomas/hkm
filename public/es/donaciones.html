<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donaciones | His Kingdom Ministry</title>
    <meta name="description"
        content="Apoya nuestro trabajo en His Kingdom Ministry. Mira nuestras campa침as de recaudaci칩n de fondos activas.">

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../css/cookie-consent.css">
    <link rel="stylesheet" href="../css/stripe-checkout.css">

    <!-- Tailwind CSS Play CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-orange': '#f39c12',
                        'primary-red': '#e74c3c',
                        'text-dark': '#333333',
                    }
                }
            }
        }
    </script>
    <script src="https://js.stripe.com/v3/"></script>
</head>

<body class="cms-loading">
    <!-- Header -->
    <header class="header fixed top-0 left-0 w-full z-[10001] transition-all duration-300" id="header">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-[100px] transition-all duration-300"
            id="header-container">
            <!-- Logo -->
            <a href="index.html" class="flex items-center gap-3 font-bold text-white transition-all duration-300 logo">
                <div
                    class="w-[45px] h-[45px] flex items-center justify-center rounded-full overflow-hidden shrink-0 logo-icon">
                    <img src="img/Logo sirkel - orange og hvit.png" alt="His Kingdom Ministry Logo"
                        class="w-full h-full object-cover">
                </div>
                <span class="text-xl">His Kingdom Ministry</span>
            </a>

            <!-- Right Actions: Donate + Language + Hamburger -->
            <div class="flex items-center gap-5 header-actions">
                <div class="lang-switcher relative group">
                    <button
                        class="flex items-center gap-2 text-white font-medium hover:text-primary-orange transition-colors lang-btn">
                        <i class="fas fa-globe text-lg"></i> <span>NO</span>
                    </button>
                    <div
                        class="lang-dropdown absolute right-0 mt-2 w-40 bg-white shadow-xl rounded-lg py-2 hidden group-hover:block border border-gray-100">
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-50 lang-switch-btn"
                            data-lang="no">游游 Norsk</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-50 lang-switch-btn"
                            data-lang="en">游쥟릖 English</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-50 lang-switch-btn"
                            data-lang="es">游쀯릖 Espa침ol</a>
                    </div>
                </div>
                <a href="donasjoner.html"
                    class="hidden md:flex items-center gap-2 px-6 py-3 rounded-full font-semibold text-white bg-gradient-to-br from-[#f39c12] to-[#e74c3c] hover:scale-105 transition-transform header-donate-btn">
                    Gi gave <i class="fas fa-heart text-sm"></i>
                </a>

                <!-- Unified Toggle Button -->
                <button
                    class="menu-toggle h-10 w-10 rounded-full flex items-center justify-center text-white bg-gradient-to-br from-[#f39c12] to-[#e74c3c] transition-transform hover:scale-105 focus:outline-none focus:ring-0 relative"
                    id="menu-toggle" aria-label="Toggle meny">
                    <i class="fas fa-bars text-lg open-icon"></i>
                    <i class="fas fa-times text-lg close-icon hidden"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Full-screen Mega Menu Overlay -->
    <div class="fixed inset-0 bg-white z-[10000] opacity-0 invisible transition-all duration-300 flex flex-col overflow-y-auto mega-menu"
        id="mega-menu">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full pt-[100px] flex flex-col gap-6 justify-start">
            <!-- Menu Top Controls (Search & Mobile Lang) -->
            <div class="flex flex-col gap-6">
                <div class="relative w-full">
                    <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    <input type="text" placeholder="쯈u칠 est치s buscando?"
                        class="w-full pl-12 pr-4 py-4 bg-gray-100 rounded-2xl border-none focus:outline-none focus:ring-0 transition-all text-gray-800">
                </div>

                <!-- Mobile Language Selector (Pill Style) -->
                <div class="flex md:hidden">
                    <div class="flex items-center gap-4 px-5 py-3 border border-gray-100 rounded-full bg-gray-50/50">
                        <i class="fas fa-globe text-gray-400"></i>
                        <div class="flex gap-4 items-center">
                            <a href="../donasjoner.html"
                                class="text-sm font-semibold text-gray-500 hover:text-primary-orange">NO</a>
                            <div class="w-px h-3 bg-gray-300"></div>
                            <a href="../en/donations.html"
                                class="text-sm font-semibold text-gray-500 hover:text-primary-orange">EN</a>
                            <div class="w-px h-3 bg-gray-300"></div>
                            <a href="donaciones.html" class="text-sm font-bold text-primary-orange">ES</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mega-menu-body">
                <!-- Menu Content Grid -->
                <div class="mega-menu-grid">
                    <!-- Column 1: Participa -->
                    <div class="menu-col">
                        <h3 class="menu-section-title">Participa</h3>
                        <ul class="mega-nav-list">
                            <li><a href="donaciones.html">Apoya nuestro trabajo</a></li>
                            <li><a href="donantes-regulares.html">Hazte donante regular</a></li>
                            <li><a href="para-iglesias.html">Para iglesias</a></li>
                            <li><a href="para-empresas.html">Para empresas</a></li>
                            <li><a href="bnn.html">Business Network</a></li>
                        </ul>
                    </div>

                    <!-- Column 2: Con칩cenos -->
                    <div class="menu-col">
                        <h3 class="menu-section-title">Con칩cenos</h3>
                        <ul class="mega-nav-list">
                            <li><a href="sobre-nosotros.html">Sobre la fundaci칩n</a></li>
                            <li><a href="sobre-nosotros.html#historia">Nuestra historia</a></li>
                            <li><a href="contacto.html">D칩nde trabajamos</a></li>
                            <li><a href="contacto.html">Cont치ctanos</a></li>
                        </ul>
                    </div>

                    <!-- Column 3: Recursos & Media -->
                    <div class="menu-col">
                        <h3 class="menu-section-title">Recursos</h3>
                        <ul class="mega-nav-list">
                            <li><a href="eventos.html">Eventos</a></li>
                            <li><a href="media.html">Media & Podcast</a></li>
                            <li><a href="blog.html">Noticias & Blog</a></li>
                            <li><a href="../minside/index.html">Mi P치gina</a></li>
                        </ul>
                    </div>
                </div>

                <!-- Menu Footer -->
                <div class="mega-menu-footer">
                    <a href="donaciones.html" class="btn btn-primary btn-large btn-block">Apoya ahora <i
                            class="fas fa-heart"></i></a>
                    <div class="menu-footer-links">
                        <a href="donaciones.html#deduccion-fiscal">Deducci칩n Fiscal</a>
                        <a href="sobre-nosotros.html">Sobre nosotros</a>
                        <a href="privacy.html">Privacidad</a>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <main>
        <!-- Page Hero -->
        <section class="page-hero" data-content-key="hero.backgroundImage"
            style="background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80'); padding-top: 160px;">
            <div class="container">
                <div class="page-hero-content">
                    <h1 class="page-title">Donaciones</h1>
                    <div class="breadcrumbs">
                        <a href="index.html">Inicio</a>
                        <i class="fas fa-chevron-right"></i>
                        <span>Donaciones</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Donations Grid -->
        <section class="donations-page section">
            <div class="container">
                <div class="section-header">
                    <span class="section-label">Apoya Nuestro Trabajo</span>
                    <h2 class="section-title">Nuestras Campa침as Activas</h2>
                    <p class="section-description">Su donaci칩n hace la diferencia. Elija un proyecto que desee apoyar y
                        칰nase a nosotros para cambiar vidas.</p>
                </div>

                <div class="causes-grid">
                    <!-- Contenido din치mico desde Firebase -->
                </div>
            </div>
        </section>


        <!-- Regular Donor Section -->
        <section class="regular-donor section" id="donantes-regulares" style="background: white;">
            <div class="container">
                <div class="section-header">
                    <span class="section-label">Hazte Donante Regular</span>
                    <h2 class="section-title">Ayuda a Crear un Cambio Duradero</h2>
                    <p class="section-description">Como donante regular, usted ayuda a asegurar la previsibilidad en
                        nuestro trabajo, de modo que podamos planificar y llevar a cabo m치s proyectos para el reino de
                        Dios.</p>
                </div>

                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; margin-top: 50px;">
                    <!-- Option 1: Vipps -->
                    <div
                        style="background: #f8f9fa; padding: 40px; border-radius: 15px; text-align: center; border: 1px solid #eee;">
                        <div
                            style="width: 70px; height: 70px; background: #FF5B24; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; color: white; font-size: 30px;">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3 style="margin-bottom: 15px;">Donaci칩n Regular v칤a Vipps</h3>
                        <p style="color: var(--text-light); margin-bottom: 25px;">La forma m치s f치cil de ser donante
                            regular. Creas un acuerdo directamente en la aplicaci칩n Vipps.</p>
                        <a href="https://vipps.no" target="_blank" class="btn btn-outline"
                            style="color: #FF5B24; border-color: #FF5B24;">Crear en Vipps</a>
                    </div>

                    <!-- Option 2: Transferencia Bancaria -->
                    <div
                        style="background: #f8f9fa; padding: 40px; border-radius: 15px; text-align: center; border: 1px solid #eee;">
                        <div
                            style="width: 70px; height: 70px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; color: white; font-size: 30px;">
                            <i class="fas fa-university"></i>
                        </div>
                        <h3 style="margin-bottom: 15px;">Transferencia Bancaria</h3>
                        <p style="color: var(--text-light); margin-bottom: 25px;">Configure una transferencia regular en
                            su banco en l칤nea a nuestra cuenta. Esto nos genera las comisiones m치s bajas.</p>
                        <div
                            style="background: white; padding: 15px; border-radius: 8px; font-weight: 700; color: var(--primary-orange); border: 1px dashed var(--primary-orange);">
                            Cuenta: 3000.66.08759
                        </div>
                    </div>
                </div>

                <div style="margin-top: 60px; text-align: center; background: var(--bg-light); padding: 30px; border-radius: 15px;"
                    id="deduccion-fiscal">
                    <h4 style="margin-bottom: 10px;"><i class="fas fa-info-circle"
                            style="margin-right: 10px; color: var(--primary-orange);"></i>쯉ab칤a que obtiene una
                        deducci칩n fiscal?</h4>
                    <p style="max-width: 800px; margin: 0 auto;">Las donaciones a His Kingdom Ministry son elegibles
                        para una deducci칩n fiscal si las donaciones totales durante un a침o calendario son de al menos
                        500 NOK. Para recibir la deducci칩n, debemos tener su n칰mero de seguridad social (11 d칤gitos,
                        para residentes en Noruega).</p>
                </div>
            </div>
        </section>

        <!-- Donation Form -->
        <section class="donation-form section" id="donar-regalo"
            style="background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);">
            <div class="container">
                <div class="section-header">
                    <span class="section-label">Hacer una Donaci칩n</span>
                    <h2 class="section-title">Apoya Nuestro Trabajo</h2>
                    <p class="section-description">Su donaci칩n marca una diferencia real. Elija un monto y un m칠todo de
                        pago a continuaci칩n.</p>
                </div>

                <div style="max-width: 700px; margin: 0 auto;">
                    <form class="donation-form-content"
                        style="background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.1);">
                        <!-- Amount Selection -->
                        <div style="margin-bottom: 30px;">
                            <label
                                style="display: block; font-weight: 600; margin-bottom: 15px; color: var(--text-dark);">Elija
                                el Monto</label>
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 15px;">
                                <button type="button" class="amount-btn" data-amount="100"
                                    style="padding: 15px; border: 2px solid #e0e0e0; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">100
                                    kr</button>
                                <button type="button" class="amount-btn" data-amount="250"
                                    style="padding: 15px; border: 2px solid #e0e0e0; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">250
                                    kr</button>
                                <button type="button" class="amount-btn" data-amount="500"
                                    style="padding: 15px; border: 2px solid #e0e0e0; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">500
                                    kr</button>
                                <button type="button" class="amount-btn" data-amount="1000"
                                    style="padding: 15px; border: 2px solid #e0e0e0; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">1000
                                    kr</button>
                            </div>
                            <input type="number" id="custom-amount" placeholder="O ingrese su propio monto"
                                style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                        </div>

                        <!-- Payment Method -->
                        <div style="margin-bottom: 30px;">
                            <label
                                style="display: block; font-weight: 600; margin-bottom: 15px; color: var(--text-dark);">M칠todo
                                de Pago</label>
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                                <label
                                    style="display: flex; align-items: center; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                                    <input type="radio" name="payment-method" value="vipps" style="margin-right: 10px;">
                                    <span style="font-weight: 600;"><i class="fas fa-mobile-alt"
                                            style="margin-right: 8px; color: #FF5B24;"></i>Vipps</span>
                                </label>
                                <label
                                    style="display: flex; align-items: center; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                                    <input type="radio" name="payment-method" value="card" style="margin-right: 10px;">
                                    <span style="font-weight: 600;"><i class="fas fa-credit-card"
                                            style="margin-right: 8px; color: #4CAF50;"></i>Tarjeta</span>
                                </label>
                                <label
                                    style="display: flex; align-items: center; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                                    <input type="radio" name="payment-method" value="bank" style="margin-right: 10px;">
                                    <span style="font-weight: 600;"><i class="fas fa-university"
                                            style="margin-right: 8px; color: #2196F3;"></i>Banco</span>
                                </label>
                            </div>
                        </div>

                        <!-- Donor Information -->
                        <div style="margin-bottom: 30px;">
                            <label
                                style="display: block; font-weight: 600; margin-bottom: 15px; color: var(--text-dark);">Su
                                Informaci칩n</label>
                            <div style="display: grid; gap: 15px;">
                                <input type="text" id="donor-name" placeholder="Nombre completo" required
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                <input type="email" id="donor-email" placeholder="Correo electr칩nico" required
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                <input type="tel" id="donor-phone" placeholder="N칰mero de m칩vil" required
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                <input type="text" id="donor-address" placeholder="Direcci칩n"
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px;">
                                    <input type="text" id="donor-zip" placeholder="C칩digo postal"
                                        style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                    <input type="text" id="donor-city" placeholder="Ciudad"
                                        style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                </div>
                                <textarea id="donor-message" placeholder="Mensaje (opcional)" rows="4"
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; resize: vertical;"></textarea>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn btn-primary"
                            style="width: 100%; padding: 18px; font-size: 18px; font-weight: 600;">
                            <i class="fas fa-heart" style="margin-right: 10px;"></i>Donar Ahora
                        </button>

                        <p style="text-align: center; margin-top: 20px; color: var(--text-light); font-size: 14px;">
                            <i class="fas fa-lock" style="margin-right: 5px;"></i>Pago Seguro
                        </p>
                    </form>
                </div>

                <!-- Stripe Checkout Container -->
                <div id="stripe-checkout-container">
                    <h3>Completar el Pago</h3>
                    <div id="payment-element">
                        <!-- Stripe.js inyecta el Elemento de Pago aqu칤 -->
                    </div>
                    <button id="submit-payment" type="button">
                        <div class="spinner hidden" id="spinner"></div>
                        <span id="button-text">Completar el Pago</span>
                    </button>
                    <div id="payment-message" class="hidden"></div>
                </div>
            </div>
        </section>

        <!-- Newsletter -->
        <section class="newsletter">
            <div class="container">
                <div class="newsletter-content">
                    <h2 class="newsletter-title">Mant칠ngase Informado</h2>
                    <p class="newsletter-text">Suscr칤base a nuestro bolet칤n para recibir las 칰ltimas noticias
                        directamente en su bandeja de entrada.</p>

                    <form class="newsletter-form">
                        <input type="email" class="newsletter-input" placeholder="Su correo electr칩nico" required>
                        <button type="submit" class="btn btn-primary">Suscribirse</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer" id="contacto">
        <div class="container">
            <div class="footer-layout-v2">
                <!-- Left Section: Brand + Links -->
                <div class="footer-left">
                    <div class="footer-brand">
                        <a href="index.html" class="logo">
                            <div class="logo-icon">
                                <img src="../img/Logo sirkel - orange og hvit.png" alt="His Kingdom Ministry Logo">
                            </div>
                            <span class="logo-text">His Kingdom Ministry</span>
                        </a>
                        <p class="brand-description">His Kingdom Ministry es una organizaci칩n sin fines de lucro
                            dedicada al crecimiento espiritual a trav칠s de la ense침anza, el podcast y los viajes
                            misioneros.</p>
                    </div>

                    <div class="footer-nav-grid">
                        <div class="nav-col">
                            <h4>Sobre nosotros</h4>
                            <ul>
                                <li><a href="index.html">Inicio</a></li>
                                <li><a href="sobre-nosotros.html">쯈ui칠nes somos?</a></li>
                                <li><a href="sobre-nosotros.html#vision">Nuestra visi칩n</a></li>
                                <li><a href="contacto.html">Cont치ctanos</a></li>
                            </ul>
                        </div>

                        <div class="nav-col">
                            <h4>Recursos</h4>
                            <ul>
                                <li><a href="media.html#teaching-section">Ense침anza</a></li>
                                <li><a href="eventos.html">Cursos en l칤nea</a></li>
                                <li><a href="blog.html">Libros & Blog</a></li>
                                <li><a href="../minside/index.html">Mi P치gina</a></li>
                            </ul>
                        </div>

                        <div class="nav-col">
                            <h4>Media</h4>
                            <ul>
                                <li><a href="media.html#podcast-section">Podcast</a></li>
                                <li><a href="media.html">Videos</a></li>
                                <li><a href="https://www.youtube.com/@HisKingdomMinistry" target="_blank">YouTube</a>
                                </li>
                            </ul>
                        </div>

                        <div class="nav-col">
                            <h4>Participaci칩n</h4>
                            <ul>
                                <li><a href="eventos.html">Calendario</a></li>
                                <li><a href="donaciones.html">Haz un donativo</a></li>
                                <li><a href="privacy.html">Privacidad</a></li>
                                <li><a href="accessibility.html">Accesibilidad</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Right Section: Cards -->
                <div class="footer-right">
                    <div class="footer-card">
                        <h3>S칤guenos</h3>
                        <div class="footer-social-icons">
                            <a href="https://www.facebook.com/hiskingdomministry777" target="_blank"><i
                                    class="fab fa-facebook-f"></i></a>
                            <a href="https://www.instagram.com/hiskingdomdesigns/" target="_blank"><i
                                    class="fab fa-instagram"></i></a>
                            <a href="https://www.youtube.com/@HisKingdomMinistry" target="_blank"><i
                                    class="fab fa-youtube"></i></a>
                        </div>
                    </div>

                    <div class="footer-card contact-card">
                        <h3>Cont치ctanos</h3>
                        <a href="contacto.html" class="btn btn-primary btn-block btn-sm">Formulario de Contacto</a>

                        <div class="contact-details">
                            <div class="detail-item">
                                <strong>Email:</strong>
                                <p>post@hiskingdomministry.no</p>
                            </div>
                            <div class="detail-item">
                                <strong>Tel칠fono:</strong>
                                <p>+47 930 94 615</p>
                            </div>
                            <div class="detail-item">
                                <strong>Vipps:</strong>
                                <p>938361</p>
                            </div>
                            <div class="detail-item">
                                <strong>N췈 de cuenta:</strong>
                                <p>3000.66.08759</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2026 His Kingdom Ministry. Todos los derechos reservados.</p>
                <a href="../admin/login.html" class="admin-link">Admin</a>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK (Compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

    <!-- Firebase Config & Service -->
    <script src="../js/firebase-config.js"></script>
    <script src="../js/firebase-service.js"></script>

    <!-- App Scripts -->
    <script src="../js/i18n.js"></script>
    <script src="../script.js"></script>
    <script src="../js/stripe-checkout.js"></script>
    <script src="../js/content-manager.js?v=author"></script>
    <script>
        window.addEventListener('load', function () {
            setTimeout(function () {
                if (typeof initDonationForm === 'function') {
                    initDonationForm();
                }

                const donationForm = document.querySelector('.donation-form-content');
                if (donationForm) {
                    donationForm.addEventListener('submit', function (e) {
                        e.preventDefault();

                        let amount = 0;
                        const customAmount = document.getElementById('custom-amount').value;
                        const selectedBtn = document.querySelector('.amount-btn.selected');

                        if (customAmount) {
                            amount = parseInt(customAmount);
                        } else if (selectedBtn) {
                            amount = parseInt(selectedBtn.dataset.amount);
                        }

                        if (amount > 0) {
                            const getValue = (id) => {
                                const el = document.getElementById(id);
                                return el ? el.value : '';
                            };

                            const customerDetails = {
                                name: getValue('donor-name'),
                                email: getValue('donor-email'),
                                phone: getValue('donor-phone'),
                                address: getValue('donor-address'),
                                zip: getValue('donor-zip'),
                                city: getValue('donor-city'),
                                message: getValue('donor-message')
                            };

                            initializeStripe(amount, customerDetails);
                        } else {
                            alert("Por favor, seleccione o ingrese un monto.");
                        }
                    });
                }

                const amountBtns = document.querySelectorAll('.amount-btn');
                amountBtns.forEach(btn => {
                    btn.addEventListener('click', function () {
                        amountBtns.forEach(b => b.classList.remove('selected'));
                        this.classList.add('selected');
                        document.getElementById('custom-amount').value = '';
                    });
                });

                document.getElementById('custom-amount').addEventListener('input', function () {
                    amountBtns.forEach(b => b.classList.remove('selected'));
                });

                const payBtn = document.getElementById('submit-payment');
                if (payBtn) {
                    payBtn.addEventListener('click', function (e) {
                        e.preventDefault();
                        const getValue = (id) => {
                            const el = document.getElementById(id);
                            return el ? el.value : '';
                        };

                        const name = getValue('donor-name');
                        const address = getValue('donor-address');
                        let billingDetails = null;

                        if (name || address) {
                            billingDetails = {
                                name: name,
                                email: getValue('donor-email'),
                                phone: getValue('donor-phone'),
                                address: {
                                    line1: address,
                                    city: getValue('donor-city'),
                                    postal_code: getValue('donor-zip'),
                                    country: 'NO',
                                }
                            };
                        }
                        handleStripeSubmit(e, { billingDetails });
                    });
                }
            }, 200);
        });
    </script>
    <script src="../js/cookie-consent.js"></script>
</body>

</html>
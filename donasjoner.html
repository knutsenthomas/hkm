<!DOCTYPE html>
<html lang="no">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donasjoner | His Kingdom Ministry</title>
    <meta name="description" content="St칮tt v친rt arbeid i His Kingdom Ministry. Se v친re aktive innsamlingsaksjoner.">

    <!-- Google Fonts: Inter for hele siden -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="css/cookie-consent.css">
    <link rel="stylesheet" href="css/stripe-checkout.css">
    <script src="https://js.stripe.com/v3/"></script>

    <!-- Tailwind CSS Play CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-orange': '#f39c12',
                        'primary-red': '#e74c3c',
                        'text-dark': '#333333',
                    }
                }
            }
        }
    </script>
</head>

<body>
    <!-- Header -->
    <header class="header fixed top-0 left-0 w-full z-[10001] transition-all duration-300" id="header">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-[100px] transition-all duration-300"
            id="header-container">
            <!-- Logo -->
            <a href="index.html" class="flex items-center gap-3 font-bold text-white transition-all duration-300 logo">
                <div
                    class="w-[45px] h-[45px] flex items-center justify-center rounded-full overflow-hidden shrink-0 logo-icon">
                    <img src="img/Logo sirkel - orange og hvit.png" alt="His Kingdom Ministry Logo"
                        class="w-full h-full object-cover">
                </div>
                <span class="text-xl">His Kingdom Ministry</span>
            </a>

            <!-- Right Actions: Donate + Language + Hamburger -->
            <div class="flex items-center gap-5 header-actions">
                <div class="lang-switcher relative group">
                    <button
                        class="flex items-center gap-2 text-white font-medium hover:text-primary-orange transition-colors lang-btn">
                        <i class="fas fa-globe text-lg"></i> <span>NO</span>
                    </button>
                    <div
                        class="lang-dropdown absolute right-0 mt-2 w-40 bg-white shadow-xl rounded-lg py-2 hidden group-hover:block border border-gray-100">
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-50 lang-switch-btn"
                            data-lang="no">游游 Norsk</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-50 lang-switch-btn"
                            data-lang="en">游쥟릖 English</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-gray-50 lang-switch-btn"
                            data-lang="es">游쀯릖 Espa침ol</a>
                    </div>
                </div>
                <a href="donasjoner.html"
                    class="hidden md:flex items-center gap-2 px-6 py-3 rounded-full font-semibold text-white bg-gradient-to-br from-[#f39c12] to-[#e74c3c] hover:scale-105 transition-transform header-donate-btn">
                    Gi gave <i class="fas fa-heart text-sm"></i>
                </a>

                <!-- Unified Toggle Button -->
                <button
                    class="menu-toggle h-10 w-10 rounded-full flex items-center justify-center text-white bg-gradient-to-br from-[#f39c12] to-[#e74c3c] transition-transform hover:scale-105 focus:outline-none focus:ring-0 relative"
                    id="menu-toggle" aria-label="Toggle meny">
                    <i class="fas fa-bars text-lg open-icon"></i>
                    <i class="fas fa-times text-lg close-icon hidden"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Full-screen Mega Menu Overlay -->
    <div class="fixed inset-0 bg-white z-[10000] opacity-0 invisible transition-all duration-300 flex flex-col overflow-y-auto mega-menu"
        id="mega-menu">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full pt-[100px] flex flex-col gap-6 justify-start">
            <!-- Menu Top Controls (Search & Mobile Lang) -->
            <div class="flex flex-col gap-6">
                <div class="relative w-full">
                    <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    <input type="text" placeholder="S칮k..."
                        class="w-full pl-12 pr-4 py-4 bg-gray-100 rounded-2xl border-none focus:outline-none focus:ring-0 transition-all text-gray-800">
                </div>

                <!-- Mobile Language Selector (Pill Style) -->
                <div class="flex md:hidden">
                    <div class="flex items-center gap-4 px-5 py-3 border border-gray-100 rounded-full bg-gray-50/50">
                        <i class="fas fa-globe text-gray-400"></i>
                        <div class="flex gap-4 items-center">
                            <a href="donasjoner.html" class="text-sm font-bold text-primary-orange">NO</a>
                            <div class="w-px h-3 bg-gray-300"></div>
                            <a href="en/donations.html"
                                class="text-sm font-semibold text-gray-500 hover:text-primary-orange">EN</a>
                            <div class="w-px h-3 bg-gray-300"></div>
                            <a href="es/donaciones.html"
                                class="text-sm font-semibold text-gray-500 hover:text-primary-orange">ES</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mega-menu-body">
                <!-- Menu Content Grid -->
                <div class="mega-menu-grid">
                    <!-- Column 1: Engasjer deg -->
                    <div class="menu-col">
                        <h3 class="menu-section-title">Engasjer deg</h3>
                        <ul class="mega-nav-list">
                            <li><a href="donasjoner.html">St칮tt arbeidet</a></li>
                            <li><a href="bli-fast-giver.html">Bli fast giver</a></li>
                            <li><a href="for-menigheter.html">For menigheter</a></li>
                            <li><a href="for-bedrifter.html">For bedrifter</a></li>
                            <li><a href="bnn.html">Business Network</a></li>
                        </ul>
                    </div>

                    <!-- Column 2: Bli kjent med oss -->
                    <div class="menu-col">
                        <h3 class="menu-section-title">Bli kjent med oss</h3>
                        <ul class="mega-nav-list">
                            <li><a href="om-oss.html">Om oss</a></li>
                            <li><a href="kontakt.html">Kontakt oss</a></li>
                        </ul>
                    </div>

                    <!-- Column 3: Ressurser & Media -->
                    <div class="menu-col">
                        <h3 class="menu-section-title">Ressurser</h3>
                        <ul class="mega-nav-list">
                            <li><a href="arrangementer.html">Arrangementer</a></li>
                            <li><a href="media.html">Media & Podcast</a></li>
                            <li><a href="blogg.html">Nyheter & Blogg</a></li>
                            <li><a href="minside/index.html">Min Side</a></li>
                        </ul>
                    </div>
                </div>

                <!-- Menu Footer -->
                <div class="mega-menu-footer">
                    <a href="donasjoner.html" class="btn btn-primary btn-large btn-block">St칮tt n친 <i
                            class="fas fa-heart"></i></a>
                    <div class="menu-footer-links">
                        <a href="donasjoner.html#skattefradrag">Skattefradrag</a>
                        <a href="om-oss.html">Om oss</a>
                        <a href="personvern.html">Personvern</a>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <main>
        <!-- Page Hero -->
        <!-- Page Hero -->
        <section class="page-hero subpage-hero" data-content-key="hero.bg"
            style="background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1488521787991-ed7bbaae773c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');">
            <div>
                <h1 class="page-hero-title" data-content-key="hero.title">Donasjoner</h1>
                <p class="page-hero-subtitle" data-content-key="hero.subtitle">Bli med og st칮tt v친rt arbeid</p>
            </div>
        </section>

        <!-- Donations Grid -->
        <section class="donations-page section">
            <div class="container">
                <div class="section-header">
                    <span class="section-label">St칮tt v친rt arbeid</span>
                    <h2 class="section-title" data-content-key="intro.title">V친re aktive innsamlingsaksjoner</h2>
                    <p class="section-description" data-content-key="intro.description">Din gave utgj칮r en forskjell.
                        Velg et prosjekt du 칮nsker 친 st칮tte og
                        bli med p친 친 forandre liv.</p>
                </div>

                <div class="causes-grid">
                    <!-- Dynamisk innhold fra Firebase -->
                </div>
            </div>
        </section>


        <!-- Regular Donor Section -->
        <section class="regular-donor section" id="faste-givere" style="background: white;">
            <div class="container">
                <div class="section-header">
                    <span class="section-label">Bli fast giver</span>
                    <h2 class="section-title">V칝r med p친 친 skape varig endring</h2>
                    <p class="section-description">Som fast giver er du med p친 친 sikre forutsigbarhet i v친rt arbeid,
                        slik at vi kan planlegge og gjennomf칮re flere prosjekter for Guds rike.</p>
                </div>

                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; margin-top: 50px;">
                    <!-- Option 1: Vipps -->
                    <div
                        style="background: #f8f9fa; padding: 40px; border-radius: 15px; text-align: center; border: 1px solid #eee;">
                        <div
                            style="width: 70px; height: 70px; background: #FF5B24; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; color: white; font-size: 30px;">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3 style="margin-bottom: 15px;">Fast gave via Vipps</h3>
                        <p style="color: var(--text-light); margin-bottom: 25px;">Den enkleste m친ten 친 bli fast giver
                            p친. Du oppretter en fast avtale direkte i Vipps-appen.</p>
                        <a href="https://vipps.no" target="_blank" class="btn btn-outline"
                            style="color: #FF5B24; border-color: #FF5B24;">Opprett i Vipps</a>
                    </div>

                    <!-- Option 2: AvtaleGiro -->
                    <div
                        style="background: #f8f9fa; padding: 40px; border-radius: 15px; text-align: center; border: 1px solid #eee;">
                        <div
                            style="width: 70px; height: 70px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 25px; color: white; font-size: 30px;">
                            <i class="fas fa-university"></i>
                        </div>
                        <h3 style="margin-bottom: 15px;">Bankoverf칮ring</h3>
                        <p style="color: var(--text-light); margin-bottom: 25px;">Opprett et fast trekk i nettbanken din
                            til v친r konto. Dette gir oss de laveste gebyrene.</p>
                        <div
                            style="background: white; padding: 15px; border-radius: 8px; font-weight: 700; color: var(--primary-orange); border: 1px dashed var(--primary-orange);">
                            Konto: 3000.66.08759
                        </div>
                    </div>
                </div>

                <div style="margin-top: 60px; text-align: center; background: var(--bg-light); padding: 30px; border-radius: 15px;"
                    id="skattefradrag">
                    <h4 style="margin-bottom: 10px;"><i class="fas fa-info-circle"
                            style="margin-right: 10px; color: var(--primary-orange);"></i>Visste du at du f친r
                        skattefradrag?</h4>
                    <p style="max-width: 800px; margin: 0 auto;">Gaver til His Kingdom Ministry gir rett til
                        skattefradrag dersom de samlede gavene i l칮pet av et kalender친r er p친 minst 500 kroner. For 친 f친
                        fradrag m친 vi ha ditt f칮dselsnummer (11 siffer).</p>
                </div>
            </div>
        </section>

        <!-- Donation Form -->
        <section class="donation-form section" id="gi-gave"
            style="background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);">
            <div class="container">
                <div class="section-header">
                    <span class="section-label">Gi gave</span>
                    <h2 class="section-title" data-content-key="form.title">St칮tt v친rt arbeid</h2>
                    <p class="section-description" data-content-key="form.description">Din gave gj칮r en reell forskjell.
                        Velg bel칮p og betalingsmetode
                        nedenfor.</p>
                </div>

                <div style="max-width: 700px; margin: 0 auto;">
                    <form class="donation-form-content"
                        style="background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.1);">
                        <!-- Amount Selection -->
                        <div style="margin-bottom: 30px;">
                            <label
                                style="display: block; font-weight: 600; margin-bottom: 15px; color: var(--text-dark);">Velg
                                bel칮p</label>
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 15px;">
                                <button type="button" class="amount-btn" data-amount="100"
                                    style="padding: 15px; border: 2px solid #e0e0e0; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">100
                                    kr</button>
                                <button type="button" class="amount-btn" data-amount="250"
                                    style="padding: 15px; border: 2px solid #e0e0e0; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">250
                                    kr</button>
                                <button type="button" class="amount-btn" data-amount="500"
                                    style="padding: 15px; border: 2px solid #e0e0e0; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">500
                                    kr</button>
                                <button type="button" class="amount-btn" data-amount="1000"
                                    style="padding: 15px; border: 2px solid #e0e0e0; background: white; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">1000
                                    kr</button>
                            </div>
                            <input type="number" id="custom-amount" placeholder="Eller skriv inn eget bel칮p"
                                style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                        </div>

                        <!-- Payment Method -->
                        <div style="margin-bottom: 30px;">
                            <label
                                style="display: block; font-weight: 600; margin-bottom: 15px; color: var(--text-dark);">Betalingsmetode</label>
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                                <label
                                    style="display: flex; align-items: center; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                                    <input type="radio" name="payment-method" value="vipps" style="margin-right: 10px;">
                                    <span style="font-weight: 600;"><i class="fas fa-mobile-alt"
                                            style="margin-right: 8px; color: #FF5B24;"></i>Vipps</span>
                                </label>
                                <label
                                    style="display: flex; align-items: center; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                                    <input type="radio" name="payment-method" value="card" style="margin-right: 10px;">
                                    <span style="font-weight: 600;"><i class="fas fa-credit-card"
                                            style="margin-right: 8px; color: #4CAF50;"></i>Kort</span>
                                </label>
                                <label
                                    style="display: flex; align-items: center; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; transition: all 0.3s;">
                                    <input type="radio" name="payment-method" value="bank" style="margin-right: 10px;">
                                    <span style="font-weight: 600;"><i class="fas fa-university"
                                            style="margin-right: 8px; color: #2196F3;"></i>Bank</span>
                                </label>
                            </div>
                        </div>

                        <!-- Donor Information -->
                        <div style="margin-bottom: 30px;">
                            <label
                                style="display: block; font-weight: 600; margin-bottom: 15px; color: var(--text-dark);">Dine
                                opplysninger</label>
                            <div style="display: grid; gap: 15px;">
                                <input type="text" id="donor-name" placeholder="Fullt navn" required
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                <input type="email" id="donor-email" placeholder="E-postadresse" required
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                <input type="tel" id="donor-phone" placeholder="Mobilnummer" required
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                <input type="text" id="donor-address" placeholder="Adresse"
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 15px;">
                                    <input type="text" id="donor-zip" placeholder="Postnr"
                                        style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                    <input type="text" id="donor-city" placeholder="Sted"
                                        style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px;">
                                </div>
                                <textarea id="donor-message" placeholder="Melding (valgfritt)" rows="4"
                                    style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; resize: vertical;"></textarea>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn btn-primary"
                            style="width: 100%; padding: 18px; font-size: 18px; font-weight: 600;">
                            <i class="fas fa-heart" style="margin-right: 10px;"></i>Gi gave n친
                        </button>

                        <p style="text-align: center; margin-top: 20px; color: var(--text-light); font-size: 14px;">
                            <i class="fas fa-lock" style="margin-right: 5px;"></i>Sikker betaling
                        </p>
                    </form>
                </div>

                <!-- Stripe Checkout Container -->
                <div id="stripe-checkout-container">
                    <h3>Fullf칮r betaling</h3>
                    <div id="payment-element">
                        <!-- Stripe.js injects the Payment Element here -->
                    </div>
                    <button id="submit-payment" type="button">
                        <div class="spinner hidden" id="spinner"></div>
                        <span id="button-text">Fullf칮r betaling</span>
                    </button>
                    <div id="payment-message" class="hidden"></div>
                </div>
            </div>
        </section>

        <!-- Newsletter -->
        <section class="newsletter">
            <div class="container">
                <div class="newsletter-content">
                    <h2 class="newsletter-title">Hold deg oppdatert</h2>
                    <p class="newsletter-text">Meld deg p친 v친rt nyhetsbrev for 친 f친 siste nytt direkte i din innboks.
                    </p>

                    <form class="newsletter-form">
                        <input type="email" class="newsletter-input" placeholder="Din e-postadresse" required>
                        <button type="submit" class="btn btn-primary">Abonner</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer" id="kontakt">
        <div class="container">
            <div class="footer-layout-v2">
                <!-- Left Section: Brand + Links -->
                <div class="footer-left">
                    <!-- Brand / Intro -->
                    <div class="footer-brand">
                        <a href="index.html" class="logo">
                            <div class="logo-icon">
                                <img src="img/Logo sirkel - orange og hvit.png" alt="His Kingdom Ministry Logo">
                            </div>
                            <span class="logo-text">His Kingdom Ministry</span>
                        </a>
                        <p class="brand-description">His Kingdom Ministry er en non-profit organisasjon dedikert til
                            친ndelig vekst gjennom undervisning, podcast og reisevirksomhet.</p>
                    </div>

                    <!-- Links Grid -->
                    <div class="footer-nav-grid">
                        <div class="nav-col">
                            <h4>Om oss</h4>
                            <ul>
                                <li><a href="index.html#hjem">Hjem</a></li>
                                <li><a href="om-oss.html">Om oss</a></li>
                                <li><a href="om-oss.html#visjon">V친r visjon</a></li>
                                <li><a href="kontakt.html">Kontakt oss</a></li>
                            </ul>
                        </div>

                        <div class="nav-col">
                            <h4>Ressurser</h4>
                            <ul>
                                <li><a href="media.html#teaching-section">Undervisning</a></li>
                                <li><a href="arrangementer.html">E-kurs</a></li>
                                <li><a href="blogg.html">B칮ker & Blogg</a></li>
                                <li><a href="minside/index.html">Min Side</a></li>
                            </ul>
                        </div>

                        <div class="nav-col">
                            <h4>Media</h4>
                            <ul>
                                <li><a href="media.html#podcast-section">Podcast</a></li>
                                <li><a href="media.html">Videoer</a></li>
                                <li><a href="https://www.youtube.com/@HisKingdomMinistry" target="_blank">YouTube</a>
                                </li>
                            </ul>
                        </div>

                        <div class="nav-col">
                            <h4>Involvering</h4>
                            <ul>
                                <li><a href="arrangementer.html">Kalender</a></li>
                                <li><a href="donasjoner.html">Gi en gave</a></li>
                                <li><a href="personvern.html">Personvern</a></li>
                                <li><a href="tilgjengelighet.html">Tilgjengelighet</a></li>
                                <li><a href="#"
                                        onclick="localStorage.removeItem('hkm_cookie_consent'); location.reload(); return false;">Cookies</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Right Section: Cards -->
                <div class="footer-right">
                    <!-- Follow Us Card -->
                    <div class="footer-card">
                        <h3>F칮lg oss</h3>
                        <div class="footer-social-icons">
                            <a href="https://www.facebook.com/hiskingdomministry777?locale=nb_NO" target="_blank"><i
                                    class="fab fa-facebook-f"></i></a>
                            <a href="https://www.instagram.com/hiskingdomdesigns/" target="_blank"><i
                                    class="fab fa-instagram"></i></a>
                            <a href="https://www.youtube.com/@HisKingdomMinistry" target="_blank"><i
                                    class="fab fa-youtube"></i></a>
                        </div>
                    </div>

                    <!-- Contact Us Card -->
                    <div class="footer-card contact-card">
                        <h3>Kontakt oss</h3>
                        <a href="kontakt.html" class="btn btn-primary btn-block btn-sm">Kontaktskjema</a>

                        <div class="contact-details">
                            <div class="detail-item">
                                <strong>E-post:</strong>
                                <p>post@hiskingdomministry.no</p>
                            </div>
                            <div class="detail-item">
                                <strong>Telefon:</strong>
                                <p>+47 930 94 615</p>
                            </div>
                            <div class="detail-item">
                                <strong>Vipps:</strong>
                                <p>938361</p>
                            </div>
                            <div class="detail-item">
                                <strong>Konto nr.:</strong>
                                <p>3000.66.08759</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; <span id="copyright-year">2026</span> His Kingdom Ministry. Alle rettigheter reservert.</p>
                <a href="admin/login.html" class="admin-link">Admin</a>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK (Compat) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

    <!-- Firebase Config & Service -->
    <script src="js/firebase-config.js"></script>
    <script src="js/firebase-service.js"></script>

    <!-- App Scripts -->
    <!-- App Scripts -->
    <script src="script.js"></script>
    <script src="js/stripe-checkout.js"></script>
    <script src="js/content-manager.js?v=author"></script>
    <script>
        // Initialize donation form after script.js loads
        window.addEventListener('load', function () {
            setTimeout(function () {
                if (typeof initDonationForm === 'function') {
                    initDonationForm();
                }

                // Attach event listener to the donation form submit
                const donationForm = document.querySelector('.donation-form-content');
                if (donationForm) {
                    donationForm.addEventListener('submit', function (e) {
                        e.preventDefault();

                        // Get the selected amount
                        let amount = 0;
                        const customAmount = document.getElementById('custom-amount').value;
                        const selectedBtn = document.querySelector('.amount-btn.selected'); // Assuming you have a class for selected state

                        if (customAmount) {
                            amount = parseInt(customAmount);
                        } else if (selectedBtn) {
                            amount = parseInt(selectedBtn.dataset.amount);
                        }

                        if (amount > 0) {
                            // Helper to safely get value or empty string
                            const getValue = (id) => {
                                const el = document.getElementById(id);
                                return el ? el.value : '';
                            };

                            const customerDetails = {
                                name: getValue('donor-name'),
                                email: getValue('donor-email'),
                                phone: getValue('donor-phone'),
                                address: getValue('donor-address'),
                                zip: getValue('donor-zip'),
                                city: getValue('donor-city'),
                                message: getValue('donor-message')
                            };

                            // Initialize Stripe with the amount and details
                            initializeStripe(amount, customerDetails);
                        } else {
                            alert("Vennligst velg eller skriv inn et bel칮p.");
                        }
                    });
                }

                // Add click handlers for amount buttons if not already present in script.js
                const amountBtns = document.querySelectorAll('.amount-btn');
                amountBtns.forEach(btn => {
                    btn.addEventListener('click', function () {
                        amountBtns.forEach(b => b.classList.remove('selected'));
                        this.classList.add('selected');
                        document.getElementById('custom-amount').value = '';
                    });
                });

                // Clear selected button if custom amount is typed
                document.getElementById('custom-amount').addEventListener('input', function () {
                    amountBtns.forEach(b => b.classList.remove('selected'));
                });

                // NEW: Handle the "Fullf칮r betaling" button click for Klarna/Vipps details
                const payBtn = document.getElementById('submit-payment');
                if (payBtn) {
                    payBtn.addEventListener('click', function (e) {
                        // Prevent default if it's a form submit (it's not, but good practice)
                        e.preventDefault();

                        // Gather details from the form
                        const getValue = (id) => {
                            const el = document.getElementById(id);
                            return el ? el.value : '';
                        };

                        const name = getValue('donor-name');
                        const address = getValue('donor-address');

                        // Only construct billingDetails if we actually have data
                        // (Stripe Element collects its own data, but pre-filling/overriding helps Klarna)
                        let billingDetails = null;

                        if (name || address) {
                            billingDetails = {
                                name: name,
                                email: getValue('donor-email'),
                                phone: getValue('donor-phone'),
                                address: {
                                    line1: address,
                                    city: getValue('donor-city'),
                                    postal_code: getValue('donor-zip'),
                                    country: 'NO', // Default to Norway
                                }
                            };
                        }

                        // Call the submit handler with options
                        handleStripeSubmit(e, { billingDetails });
                    });
                }

            }, 200);
        });
    </script>
    <script src="js/cookie-consent.js"></script>
</body>

</html>